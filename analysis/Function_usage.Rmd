---
title: "Presentation of functions"
site: workflowr::wflow_site
output: workflowr::wflow_html
editor_options:
  chunk_output_type: console
---

```{r, include=FALSE}
source("code/function.R")
```


This page is intended to provide an overview of the functions that are used in the examples on the home page. The structure of the page is that each function is presented with a short description of the input arguments and the output. To each function there will be a link to a page that include a further detailed description of the function and where the code is also presented.

When refering to cover_data, it is data of the form:

```{r, include=FALSE}
Cover <- data.frame(   a1 = c(2,0,5,0,1,0,16),
                       a2 = c(0,0,0,2,0,1,10),
                       a3 = c(0,0,1,1,16,0,2),
                       a4 = c(1,0,10,9,0,0,7),
                       a5 = c(0,0,0,3,0,0,0),
                       a6 = c(3,0,11,0,14,1,13),
                       a7 = c(0,0,7,4,0,1,0),
                       a8 = c(0,0,16,9,0,0,9),
                       a9 = c(2,0,0,1,11,0,5),
                       a10 = c(0,0,0,1,13,0,0))


rownames(Cover) <- c("Plot 1", "Plot 2", "Plot 3", "Plot 4", "Plot 5", "Plot 6", "Plot 7")
colnames(Cover) <- c("Specie 1", "Specie 2", "Specie 3", "Specie 4", "Specie 5", "Specie 6", "Specie 7", "Specie 8", "Specie 9", "Specie 10")
```

When refering to presence_absence_data, it is data of the form:

```{r, include=FALSE}
PresenceAbsence <- data.frame(   a1 = c(1,0,1,0,1,0,1),
                                 a2 = c(1,1,0,1,0,1,1),
                                 a3 = c(0,0,1,1,1,0,1),
                                 a4 = c(1,0,1,1,0,0,1),
                                 a5 = c(0,0,0,1,0,0,1),
                                 a6 = c(1,0,1,0,1,1,1),
                                 a7 = c(1,0,1,1,0,1,0),
                                 a8 = c(0,0,1,1,0,0,1),
                                 a9 = c(1,0,0,1,1,0,1),
                                 a10 = c(0,0,0,1,1,0,1))


rownames(PresenceAbsence) <- c("Plot 1", "Plot 2", "Plot 3", "Plot 4", "Plot 5", "Plot 6", "Plot 7")
colnames(PresenceAbsence) <- c("Specie 1", "Specie 2", "Specie 3", "Specie 4", "Specie 5", "Specie 6", "Specie 7", "Specie 8", "Specie 9", "Specie 10")
```



For each function we will use the above data to give an example of the usage of the function.

<h1>Bayesian method</h1>
Main function of this vignette. The function is an implementation of the method outlined on the home page.

**Usage:**

beta_binomial_cover_update(cover_data, presence_absence_data, n = 16 , remove_column = 0)

**Arguments:**

* **Cover_data**: Data frame with plots as rows and species as columns. Each cell in the data frame contains cover data for a given specie in a given plot.
* **presence_absence_data**: Data frame with plots as rows and species as columns. Each cell in the data frame contains a 1 if the specie is present in the plot or a 0 if the specie is absent in the plot.
* **n**: An integer. A number each cell in the cover data gets divided by if the cover data is not in the interval $[0,1]$. In the NOVANA dataset n = 16 secures this property. If the cover data is already on the interval $[0,1]$, one can just let n = 1. n is the number of pins used in each blot, so by dividing each entry with n, we normalize the data.
* **remove_column**: An integer. In case the first columns in the cover_data and presence_absence_data contain data not about the species but rather information on the plots, these columns have to be removed. The numbers of columns to be removed must be the same in the cover_data and presence/absence_data. The removed columns will be included again in the  output. In the NOVANA dataset the first columns are "site", "plot", year" so remove_column = 3 when this datasat is applied.

**Output** 

* The function returns a dataframe with plots as rows and species as columns, and where each entry contain new abundance data for a specie in a plot.

For further specifications of the function click [link](bayesian_method_describtion.html)

**Calulated example** 

```{r}
beta_binomial_cover_update(Cover, PresenceAbsence, n = 16 , remove_column = 0)
```


<h1> Functions for diversity estimates</h1>
------

The functions below implement the different diversity estimates defined at [Diversity](Diversity.html). The code implementations of the functions can be found at [link](diversity_functions_code.html)

<h3> Shannon index </h3>

**Usage:**

shannon(cover_data, remove_column = NULL)

**Arguments:**

* **Cover_data**: Data frame with plots as rows and species as columns. Each cell in the data frame contains cover data for a given specie in a given plot.

* **remove_column**: An integer. In case the first columns in the cover_data contain data not about the species but rather information on the plots, these columns have to be removed. If remove_column is left empty it is assumed that all columns contain cover_data on species.

**Output:**

* A vector with the shannon index for each plot in the input cover_data. First value in the vector corresponds to the first plot in the cover_data and so on.

**Calulated example** 

```{r}
shannon(Cover, remove_column = 0)
```


<h3> Simpson's index</h3>
------

**Usage:**

simpson(cover_data, remove_column = NULL)

**Arguments:**

* **Cover_data**: Data frame with plots as rows and species as columns. Each cell in the data frame contains cover data for a given specie in a given plot.

* **remove_column**: An integer. In case the first columns in the cover_data contain data not about the species but rather information on the plots, these columns have to be removed. If remove_column is left empty it is assumed that all columns contain cover_data on species.

**Output:**

* A vector with simpson's index for each plot in the input cover_data. First value in the vector corresponds to the first plot in the cover_dataand so on.

**Calulated example** 

```{r}
simpson(Cover, remove_column = 0)
```

 
<h3>Species richness </h3>
------

**Usage:**

species_richness(presence_absence_data, remove_column = NULL)

**Arguments:**

* **presence_absence_data**: Data frame with plots as rows and species as columns. Each cell in the data frame contains a 1 if the specie is present in the plot or a 0 if the specie is absent in the plot.

* **remove_column**: An integer. In case the first columns in the presence_absence_data contain data not about the species but rather information on the plots, these columns have to be removed. If remove_column is left empty it is assumed that all columns contain cover_data on species.

**Output:**

* A vector with species richness for each plot in the input presence_absence_data. First value in the vector corresponds to the first plot in the cover_data and so on.

**Calulated example** 

```{r}
species_richness(PresenceAbsence, remove_column = 0)
```


<h3> Hill shannon diveristy </h3>
------

**Usage:**

hill_shannon(cover_data, remove_column = NULL)

**Arguments:**

* **Cover_data**: Data frame with plots as rows and species as columns. Each cell in the data frame contains cover data for a given specie in a given plot.

* **remove_column**: An integer. In case the first columns in the cover_data contain data not about the species but rather information on the plots, these columns have to be removed. If remove_column is left empty it is assumed that all columns contain cover_data on species.

**Output:**

* A vector with the Hill Shannon diversity for each plot in the input cover_data. First value in the vector corresponds to the first plot in the cover_data and so on.

**Calulated example** 

```{r}
hill_shannon(Cover, remove_column = 0)
```


<h3> Hill Simpson diversity</h3>
------

**Usage:**

hill_simpson(cover_data, remove_column = NULL)

**Arguments:**

* **Cover_data**: Data frame with plots as rows and species as columns. Each cell in the data frame contains cover data for a given specie in a given plot.

* **remove_column**: An integer. In case the first columns in the cover_data contain data not about the species but rather information on the plots, these columns have to be removed. If remove_column is left empty it is assumed that all columns contain cover_data on species.

**Output:**

* A vector with the Hill Simpson diversity for each plot in the input cover_data. First value in the vector corresponds to the first plot in the cover_data and so on.

**Calulated example** 

```{r}
hill_simpson(Cover, remove_column = 0)
```



<h1>Plot of different diversities</h1>
------

This function plots different diversity estimates of a plot against some information of interest about the plot. 

**Usage:**

plot_diversity(data, diversities, plot_info, description = NULL)

**Arguments:**

* **data**: A data frame. Contains one or more columns of different diversity estimates of plots and also a column with some information about the plots, could be a plot ID or something like it.
* **diversities**: A list of strings. The names of the columns in the data that contain diversity estimates.
* **plot_info**: A string. The column name in the data that contains the plot information one wants to plot the diversities against.
* **description**: A string. The description of the plot information.

**Output:**

* Plots with different diversity estimates mapped against the plot information of interest.

Further documentaion and code implementation at [link](gradient_plot.html)




```{r, include=FALSE, eval=FALSE}
<h1>diversity_index</h1>
------

A function using abundance data to calculate a diversity index using:

$$
\text{Hill diversity = }\left( \sum_{i=1}^{S} p_i (r_i)^{l}\right)^{1/l}
$$

**Usage:**

diversity_index(abundance_data, remove_columns = 0, l = 1)

**Arguments:**

* **abundance_data**: Abundance data in a data frame, with plots as rows and species as columns.
* **remove_columns**: Exclude n column from the data analysis. i.e if the first 3 columns include data about the plot, and is not data about a species can they be excluded.
* **l**: A number that specifies l in the formula.

**Output**

A vector with the diversity for each row in the abundance data.

```



